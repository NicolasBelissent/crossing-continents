---
import Container from "@/components/Container.astro";
import Head from "@/components/Head.astro";
import { getCollection } from 'astro:content';

// Get all blog posts
const allBlogs = await getCollection('blog');
const sortedBlogs = allBlogs.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<!doctype html>
<html lang="en">
  <head>
    <Head title="All Blogs - Crossing Continents" description="Browse all our travel stories and adventures" />
    <style>
      body {
        background-color: #ffffff !important;
        color: #000000 !important;
      }
    </style>
  </head>
  <body class="bg-white text-black font-sans">
    <section class="py-12 md:py-20">
      <Container>
        <div class="max-w-2xl mx-auto">
          <a href="/" class="inline-block mb-8 text-black/60 hover:text-black transition-colors">
            ← Back to Home
          </a>

          <div class="mb-12">
            <h1 class="text-3xl md:text-4xl font-normal mb-4 leading-tight">All Blogs</h1>
            <p class="text-lg text-black/70">
              {sortedBlogs.length} {sortedBlogs.length === 1 ? 'story' : 'stories'} from our adventures
            </p>
          </div>

          <div class="space-y-8">
            {sortedBlogs.map((blog) => {
              const formattedDate = new Intl.DateTimeFormat('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
              }).format(blog.data.date);

              return (
                <a href={`/blog/${blog.slug}`} class="block group border-b border-black/10 pb-8 hover:border-black/30 transition-colors">
                  <div class="flex gap-3 text-sm text-black/60 mb-2">
                    <time>{formattedDate}</time>
                    <span>·</span>
                    <span>{blog.data.author}</span>
                  </div>
                  <h2 class="text-2xl font-medium mb-2 group-hover:opacity-70 transition-opacity">{blog.data.title}</h2>
                  <p class="text-black/70">{blog.data.description}</p>
                </a>
              );
            })}
          </div>
        </div>
      </Container>
    </section>
  </body>
</html>

<style>
  html {
    scroll-behavior: smooth;
  }
</style>
